# 🧠 What is a Dockerfile?

A **Dockerfile** is simply a **text file** that contains a **set of instructions** for building a Docker image.
Each instruction tells Docker **how to set up the environment, what dependencies to install, and how to start your app.**

---

## Let's create a dockerfile for a node app

## 🚩 Before Writing the Dockerfile

Make sure your Node.js project is ready:

- Your folder should have:

```pgsql
project/
├── package.json
├── package-lock.json
├── src/ or index.js
└── (maybe .env, README, etc.)
```

- Ensure your app runs locally:

```bash
npm install
npm start
```

or whatever your start command is.

---

## 🏗️ Steps to Create a Dockerfile

We’ll build it line by line, and I’ll explain each one.

### 1️⃣ Start with a Base Image

Every Docker image starts from another image.

```dockerfile
FROM node:18
```

- node:18 = official Node.js image (comes with Node & npm preinstalled).
- You can use other versions like node:20 if needed.

---

### 2️⃣ Set the Working Directory

Inside the container, we’ll choose a folder where our code will live.

```dockerfile
WORKDIR /app
```

- This means: “All future commands will run inside /app.”

---

### 3️⃣ Copy Package Files First

We copy only the files needed to install dependencies.

```dockerfile
COPY package*.json ./
```

- This copies package.json and package-lock.json into the container.
- Doing this first lets Docker cache dependencies (so you don’t reinstall every time you rebuild).

---

### 4️⃣ Install Dependencies

```dockerfile
RUN npm install
```

This installs all dependencies inside the container.

---

### 5️⃣ Copy the Rest of Your Code

```dockerfile
COPY . .
```

Now all your source files go into the container.

---

### 6️⃣ Expose the Port

If your Node app runs on a port (e.g., 8000 or 3000), you should tell Docker.

```dockerfile
EXPOSE 8000
```

This doesn’t actually open the port — it just declares which one your app uses.

---

### 7️⃣ Define the Command to Run Your App

Finally, we tell Docker how to start your app.

```dockerfile
CMD ["npm", "start"]
```

or if your main file is directly executable:

```dockerfile
CMD ["node", "index.js"]
```

---

# ✅ Final Dockerfile Example

Here’s a full working Dockerfile for a simple Node.js app:

```dockerfile
# 1. Use official Node image

FROM node:18

# 2. Set working directory

WORKDIR /app

# 3. Copy dependency files

COPY package\*.json ./

# 4. Install dependencies

RUN npm install

# 5. Copy the rest of the project files

COPY . .

# 6. Expose port

EXPOSE 8000

# 7. Start the app

CMD ["npm", "start"]
```

---

# 🧩 Folder Structure After Adding Dockerfile

```pgsql
project/
├── Dockerfile
├── package.json
├── package-lock.json
├── src/
└── index.js
```

---

# 🧪 Build and Run Commands

### Build the Docker image

```bash
docker build -t my-node-app .
```

`-t` = tag (naming your image)

### Run the container

```bash
docker run -p 8000:8000 my-node-app
```

Maps your local port 8000 → container’s port 8000.

Now open `http://localhost:8000` in your browser.

---

### NOTE: Use `.dockerignore` to skip unnecessary files (like `node_modules`, `.env`, etc.).

### 🧾 Example `.dockerignore`

Create a file called `.dockerignore` next to your Dockerfile:

```lua
node_modules
npm-debug.log
Dockerfile
.dockerignore
.git
.gitignore
.env
```
